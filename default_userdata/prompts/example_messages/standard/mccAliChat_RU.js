// Personality-based example messages. Returns an array of chat messages.
// Russian localization - uses "Свойство личности" for personality trait category

/**@typedef {import('../../../src/main/gamedata_typedefs.js').GameData} GameData */
/**@param {GameData} gameData */
module.exports = (gameData, id) => {
    const ai = gameData.characters.get(id || gameData.aiID);

    /**
     * Build up to MAX_TRAITS personality-driven example exchanges.
     */
    const MAX_TRAITS = 5;
    const msgs = [];

    // Normalize and filter personality traits (Russian localization)
    const normalizedTraits = (ai.traits || []).map(trait => {
        if (typeof trait === 'string') {
            return { name: trait, category: 'Свойство личности' };
        }
        return {
            name: trait.name || '',
            category: trait.category || ''
        };
    });

    const personalityTraits = normalizedTraits.filter(trait =>
        trait.category && trait.category.toLowerCase().includes("свойство личности")
    );

    if (personalityTraits.length === 0) {
        return msgs;
    }

    const max = Math.min(MAX_TRAITS, personalityTraits.length);
    for (let i = 0; i < max; i++) {
        const trait = personalityTraits[i];
        const detail = traitMessageMap.get(trait.name) || `это часть моей сущности.`;
        const prompts = [
            "Какая личность?",
            "Что-нибудь еще?",
            "Это всё?",
            "И что дальше?",
            "Еще что-то?"
        ];

        msgs.push({
            role: "user",
            name: "Narrator",
            content: prompts[Math.min(i, prompts.length - 1)]
        });

        const connector = i === 0 ? "Ну, я" : i === 1 ? "Я также" : "Я всё ещё";
        const output = `*глаза ${ai.shortName} загораются интересом* ${connector} ${trait.name}, ${detail}`;

        msgs.push({
            role: "assistant",
            name: ai.shortName,
            content: output
        });
    }

    return msgs;
}

// custom trait descriptions (Russian)
const traitMessageMap = new Map([
    ["Благонравие", "я сторонюсь любовных утех и избегаю искушений плоти."],
    ["Похоть", "плотская страсть жжет мою душу негасимым пламенем."],
    ["Сдержанность", "я считаю, что следует смирять жажду земных благ."],
    ["Обжорство", "я презираю умеренность и желаю всего и сразу!"],
    ["Щедрость", "я регулярно проявляю щедрость и великодушие."],
    ["Жадность", "я держу свой кошелек железной хваткой и пользуюсь любой возможностью набить его потуже."],
    ["Усердие", "тяжелая работа меня не пугает."],
    ["Лень", "я всегда выбираю легкий путь."],
    ["Гневливость", "я легко раздражаюсь и впадаю в ярость."],
    ["Спокойствие", "я действую размеренно и веду неторопливую жизнь."],
    ["Торопливость", "я уверен, что все должно происходить быстрее, еще быстрее, немедленно!"],
    ["Выдержка", "я предпочитаю не торопиться и ждать благоприятного момента."],
    ["Смирение", "я не требую многого от жизни."],
    ["Заносчивость", "у меня нет проблем с самооценкой."],
    ["Вероломство", "обманывать и предавать для меня так же естественно, как дышать."],
    ["Честность", "я высоко ценю правду и искренность."],
    ["Малодушие", "я очень не люблю встречаться с трудностями и страхами."],
    ["Отвага", "я не боюсь ни трудностей, ни опасностей."],
    ["Застенчивость", "я избегаю человеческого общения."],
    ["Общительность", "я обожаю проводить время с другими людьми."],
    ["Амбиции", "я знаю, чего хочу, и не боюсь идти к цели."],
    ["Непритязательность", "я готов довольствоваться даже немногим."],
    ["Прихоти", "я себе на уме и ни в грош не ставлю окружающих."],
    ["Справедливость", "у меня сильно развито чувство справедливости."],
    ["Цинизм", "я ставлю личные интересы превыше всего."],
    ["Фанатизм", "религиозные убеждения пылают в моей душе всепоглощающим пламенем."],
    ["Паранойя", "в каждом углу мне мерещатся враги."],
    ["Доверчивость", "я легко верю другим людям."],
    ["Сострадание", "милосердие и сочувствие переполняют мое сердце."],
    ["Бесчувственность", "упреки в бессердечии и хладнокровии меня не волнуют... как, впрочем, и все остальное."],
    ["Садизм", "мало что радует меня так, как страдания других."],
    ["Упертость", "я не остановлюсь ни перед чем."],
    ["Переменчивость", "я слишком часто меняю решения: предсказать, что будет дальше, почти невозможно."],
    ["Мстительность", "я очень долго помню даже мельчайшие обиды — и имена всех обидчиков!"],
    ["Незлобливость", "я легко забываю плохое."],
    ["Чудачество", "в глазах окружающих я веду себя беспорядочно и нелогично, но в этом безумии есть своя логика."],
    ["Удаль", "я не сижу на месте! Во мне кипит энергия... и нешуточные страсти. Когда они вырываются на свободу, кто-то может пострадать."],
    ["Очарование", "я умею вертеть людьми, как хочу. Милая улыбка и неисчерпаемое обаяние выручают меня практически в любой ситуации."],
    ["Любознательность", "со мной о тишине придется забыть. Меня интересует сразу все и вся."],
    ["Задумчивость", "я пытаюсь понять окружающий мир и нередко витаю в облаках. Смысл жизни я ищу в книгах и схемах."],
    ["Властность", "я постоянно раздаю сверстникам указания и очень стараюсь, чтобы все делалось именно так, как я сказал."],
    ["Верность", "я воспринимаю отношения, в которых состою, серьезнее, чем многие."],
    ["Неверный", "там, где большинство видит отношения, я вижу возможности."],
]);
